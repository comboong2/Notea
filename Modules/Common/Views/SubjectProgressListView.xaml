<UserControl x:Class="SP.Modules.Common.Views.SubjectProgressListView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:SP.Modules.Common.Views"
             Height="Auto" Width="Auto">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Orientation="Vertical">
            <ItemsControl ItemsSource="{Binding Subjects}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="0,0,0,0">
                            <!-- 과목 이름 -->
                            <Grid Height="60">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*"/>
                                    <ColumnDefinition Width="1*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0"
                                           Text="{Binding SubjectName}"
                                           FontSize="16"
                                           FontWeight="Bold"
                                           VerticalAlignment="Center"/>

                                <!-- 과목 전체 진행률 (예시용, 실제 구현 필요시 Progress 속성 추가) -->
                                <Border Grid.Column="1" Height="20" VerticalAlignment="Center">
                                    <Grid>
                                        <Rectangle Fill="#DDDDDD"/>
                                        <Rectangle Fill="Black"
                                                   HorizontalAlignment="Right"
                                                   Width="{Binding ProgressWidth}" />
                                    </Grid>
                                </Border>
                            </Grid>

                            <!-- 분류 리스트 -->
                            <ItemsControl ItemsSource="{Binding TopicGroups[0].Topics}" Margin="10,0,0,0">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Height="60">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="1*"/>
                                                <ColumnDefinition Width="1*"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- 체크 박스 -->
                                            <CheckBox Width="20" Height="20"
                                              Style="{StaticResource ToDoCheckBoxStyle}"
                                              VerticalAlignment="Center"
                                              Margin="0,0,10,0"/>

                                            <!-- 분류 이름 -->
                                            <TextBlock Grid.Column="1"
                                                       Text="{Binding Name}"
                                                        FontWeight="Bold"
                                                        FontSize="14"
                                                       VerticalAlignment="Center"/>

                                            <!-- 분류 진행률 -->
                                            <Border Grid.Column="2" Height="20" VerticalAlignment="Center">
                                                <Grid>
                                                    <Rectangle Fill="#EEEEEE"/>
                                                    <Rectangle Fill="Black"
                                                               HorizontalAlignment="Right"
                                                               Width="{Binding Progress, Converter={StaticResource ProgressToWidthConverter}}"/>
                                                </Grid>
                                            </Border>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </ScrollViewer>
</UserControl>
